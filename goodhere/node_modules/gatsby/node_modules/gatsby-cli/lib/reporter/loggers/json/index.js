"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _index = require("../../redux/index");

var _stripAnsi = _interopRequireDefault(require("strip-ansi"));

var _lodash = _interopRequireDefault(require("lodash"));

(0, _index.onLogAction)(action => {
  const sanitizedAction = Object.assign({}, action, {
    payload: _lodash.default.isPlainObject(action.payload) ? Object.assign({}, action.payload, {
      text: (0, _stripAnsi.default)(action.payload.text),
      statusText: (0, _stripAnsi.default)(action.payload.statusText)
    }) : action.payload
  });
  process.stdout.write(JSON.stringify(sanitizedAction) + `\n`);
});