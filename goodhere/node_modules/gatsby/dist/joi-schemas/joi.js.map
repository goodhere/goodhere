{"version":3,"sources":["../../src/joi-schemas/joi.js"],"names":["Joi","require","stripTrailingSlash","chain","replace","addLeadingSlash","when","string","uri","relativeOnly","then","gatsbyConfigSchema","object","keys","__experimentalThemes","array","polyfill","boolean","default","assetPrefix","allowRelative","pathPrefix","allow","siteMetadata","siteUrl","unknown","mapping","plugins","proxy","items","prefix","required","url","single","developMiddleware","func","error","Error","pageSchema","path","matchPath","component","componentChunkName","context","pluginCreator___NODE","pluginCreatorId","nodeSchema","id","children","forbidden","parent","fields","internal","contentDigest","mediaType","type","owner","fieldOwners","content","description","ignoreType","counter","number"],"mappings":"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","sourcesContent":["const Joi = require(`@hapi/joi`)\n\nconst stripTrailingSlash = chain => chain.replace(/(\\w)\\/+$/, `$1`)\n// only add leading slash on relative urls\nconst addLeadingSlash = chain =>\n  chain.when(Joi.string().uri({ relativeOnly: true }), {\n    then: chain.replace(/^([^/])/, `/$1`),\n  })\n\nexport const gatsbyConfigSchema = Joi.object()\n  .keys({\n    __experimentalThemes: Joi.array(),\n    polyfill: Joi.boolean().default(true),\n    assetPrefix: stripTrailingSlash(\n      Joi.string().uri({\n        allowRelative: true,\n      })\n    ),\n    pathPrefix: addLeadingSlash(\n      stripTrailingSlash(\n        Joi.string()\n          .uri({\n            allowRelative: true,\n            relativeOnly: true,\n          })\n          .default(``)\n          // removes single / value\n          .allow(``)\n          .replace(/^\\/$/, ``)\n      )\n    ),\n    siteMetadata: Joi.object({\n      siteUrl: stripTrailingSlash(Joi.string()).uri(),\n    }).unknown(),\n    mapping: Joi.object(),\n    plugins: Joi.array(),\n    proxy: Joi.array()\n      .items(\n        Joi.object().keys({\n          prefix: Joi.string().required(),\n          url: Joi.string().required(),\n        })\n      )\n      .single(),\n    developMiddleware: Joi.func(),\n  })\n  // throws when both assetPrefix and pathPrefix are defined\n  .when(\n    Joi.object({\n      assetPrefix: Joi.string().uri({\n        allowRelative: true,\n        relativeOnly: true,\n      }),\n      pathPrefix: Joi.string()\n        .uri({\n          allowRelative: true,\n          relativeOnly: true,\n        })\n        .default(``),\n    }),\n    {\n      then: Joi.object({\n        assetPrefix: Joi.string()\n          .uri({\n            allowRelative: false,\n          })\n          .error(\n            new Error(\n              `assetPrefix must be an absolute URI when used with pathPrefix`\n            )\n          ),\n      }),\n    }\n  )\n\nexport const pageSchema = Joi.object()\n  .keys({\n    path: Joi.string().required(),\n    matchPath: Joi.string(),\n    component: Joi.string().required(),\n    componentChunkName: Joi.string().required(),\n    context: Joi.object(),\n    pluginCreator___NODE: Joi.string(),\n    pluginCreatorId: Joi.string(),\n  })\n  .unknown()\n\nexport const nodeSchema = Joi.object()\n  .keys({\n    id: Joi.string().required(),\n    children: Joi.array().items(Joi.string(), Joi.object().forbidden()),\n    parent: Joi.string().allow(null),\n    fields: Joi.object(),\n    internal: Joi.object()\n      .keys({\n        contentDigest: Joi.string().required(),\n        mediaType: Joi.string(),\n        type: Joi.string().required(),\n        owner: Joi.string().required(),\n        fieldOwners: Joi.object(),\n        content: Joi.string().allow(``),\n        description: Joi.string(),\n        ignoreType: Joi.boolean(),\n        counter: Joi.number(),\n      })\n      .unknown(false), // Don't allow non-standard fields\n  })\n  .unknown()\n"],"file":"joi.js"}