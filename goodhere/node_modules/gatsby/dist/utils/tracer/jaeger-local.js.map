{"version":3,"sources":["../../../src/utils/tracer/jaeger-local.js"],"names":["initTracer","require","tracer","create","config","serviceName","reporter","collectorEndpoint","sampler","type","param","options","stop","Promise","resolve","close","module","exports"],"mappings":";;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAE,eAAF,CAAP,CAAyBD,UAA5C;;AAEA,IAAIE,MAAJ;;AAEA,SAASC,MAAT,GAAkB;AAChB;AACA;AACA,MAAIC,MAAM,GAAG;AACXC,IAAAA,WAAW,EAAG,QADH;AAEXC,IAAAA,QAAQ,EAAE;AACR;AACA;AACAC,MAAAA,iBAAiB,EAAG;AAHZ,KAFC;AAOXC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAG,OADA;AAEPC,MAAAA,KAAK,EAAE;AAFA;AAPE,GAAb;AAYA,MAAIC,OAAO,GAAG,EAAd;AACAT,EAAAA,MAAM,GAAGF,UAAU,CAACI,MAAD,EAASO,OAAT,CAAnB;AACA,SAAOT,MAAP;AACD;;AAED,SAASU,IAAT,GAAgB;AACd,SAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC5BZ,IAAAA,MAAM,CAACa,KAAP,CAAaD,OAAb;AACD,GAFM,CAAP;AAGD;;AAEDE,MAAM,CAACC,OAAP,GAAiB;AACfd,EAAAA,MADe;AAEfS,EAAAA;AAFe,CAAjB","sourcesContent":["const initTracer = require(`jaeger-client`).initTracer\n\nlet tracer\n\nfunction create() {\n  // See schema\n  // https://github.com/jaegertracing/jaeger-client-node/blob/master/src/configuration.js#L37\n  var config = {\n    serviceName: `gatsby`,\n    reporter: {\n      // Provide the traces endpoint; this forces the client to\n      // connect directly to the Collector and send spans over HTTP\n      collectorEndpoint: `http://localhost:14268/api/traces`,\n    },\n    sampler: {\n      type: `const`,\n      param: 1,\n    },\n  }\n  var options = {}\n  tracer = initTracer(config, options)\n  return tracer\n}\n\nfunction stop() {\n  return new Promise(resolve => {\n    tracer.close(resolve)\n  })\n}\n\nmodule.exports = {\n  create,\n  stop,\n}\n"],"file":"jaeger-local.js"}