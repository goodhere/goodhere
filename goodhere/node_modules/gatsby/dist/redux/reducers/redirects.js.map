{"version":3,"sources":["../../../src/redux/reducers/redirects.js"],"names":["_","require","redirects","Map","exists","newRedirect","has","fromPath","get","some","redirect","isEqual","add","samePathRedirects","set","push","module","exports","state","action","type","payload"],"mappings":";;AAAA,MAAMA,CAAC,GAAGC,OAAO,CAAE,QAAF,CAAjB;;AAEA,MAAMC,SAAS,GAAG,IAAIC,GAAJ,EAAlB;;AAEA,SAASC,MAAT,CAAgBC,WAAhB,EAA6B;AAC3B,MAAI,CAACH,SAAS,CAACI,GAAV,CAAcD,WAAW,CAACE,QAA1B,CAAL,EAA0C;AACxC,WAAO,KAAP;AACD;;AAED,SAAOL,SAAS,CACbM,GADI,CACAH,WAAW,CAACE,QADZ,EAEJE,IAFI,CAECC,QAAQ,IAAIV,CAAC,CAACW,OAAF,CAAUD,QAAV,EAAoBL,WAApB,CAFb,CAAP;AAGD;;AAED,SAASO,GAAT,CAAaF,QAAb,EAAuB;AACrB,MAAIG,iBAAiB,GAAGX,SAAS,CAACM,GAAV,CAAcE,QAAQ,CAACH,QAAvB,CAAxB;;AAEA,MAAI,CAACM,iBAAL,EAAwB;AACtBA,IAAAA,iBAAiB,GAAG,EAApB;AACAX,IAAAA,SAAS,CAACY,GAAV,CAAcJ,QAAQ,CAACH,QAAvB,EAAiCM,iBAAjC;AACD;;AAEDA,EAAAA,iBAAiB,CAACE,IAAlB,CAAuBL,QAAvB;AACD;;AAEDM,MAAM,CAACC,OAAP,GAAiB,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AACvC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAM,iBAAN;AAAwB;AACtB,cAAMV,QAAQ,GAAGS,MAAM,CAACE,OAAxB,CADsB,CAGtB;;AACA,YAAI,CAACjB,MAAM,CAACM,QAAD,CAAX,EAAuB;AACrBE,UAAAA,GAAG,CAACF,QAAD,CAAH;AAEAQ,UAAAA,KAAK,CAACH,IAAN,CAAWL,QAAX;AACD;;AAED,eAAOQ,KAAP;AACD;;AAED;AACE,aAAOA,KAAP;AAfJ;AAiBD,CAlBD","sourcesContent":["const _ = require(`lodash`)\n\nconst redirects = new Map()\n\nfunction exists(newRedirect) {\n  if (!redirects.has(newRedirect.fromPath)) {\n    return false\n  }\n\n  return redirects\n    .get(newRedirect.fromPath)\n    .some(redirect => _.isEqual(redirect, newRedirect))\n}\n\nfunction add(redirect) {\n  let samePathRedirects = redirects.get(redirect.fromPath)\n\n  if (!samePathRedirects) {\n    samePathRedirects = []\n    redirects.set(redirect.fromPath, samePathRedirects)\n  }\n\n  samePathRedirects.push(redirect)\n}\n\nmodule.exports = (state = [], action) => {\n  switch (action.type) {\n    case `CREATE_REDIRECT`: {\n      const redirect = action.payload\n\n      // Add redirect only if it wasn't yet added to prevent duplicates\n      if (!exists(redirect)) {\n        add(redirect)\n\n        state.push(redirect)\n      }\n\n      return state\n    }\n\n    default:\n      return state\n  }\n}\n"],"file":"redirects.js"}